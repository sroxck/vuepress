(window.webpackJsonp=window.webpackJsonp||[]).push([[288],{865:function(s,t,r){"use strict";r.r(t);var a=r(58),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,r=s._self._c||t;return r("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[r("h1",{attrs:{id:"react组件进阶"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#react组件进阶"}},[s._v("#")]),s._v(" react组件进阶")]),s._v(" "),r("h2",{attrs:{id:"组件通讯"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#组件通讯"}},[s._v("#")]),s._v(" 组件通讯")]),s._v(" "),r("h3",{attrs:{id:"组件的props"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#组件的props"}},[s._v("#")]),s._v(" 组件的props")]),s._v(" "),r("ol",[r("li",[s._v("接收外部数据应该通过props来实现")]),s._v(" "),r("li",[s._v("props的 作用:接收传递给组件的数组")]),s._v(" "),r("li",[s._v("传递数据: 给组件标签添加属性")]),s._v(" "),r("li",[s._v("接收数据,函数组件通过参数props接收数据,类组件通过this.props接收数据")]),s._v(" "),r("li",[s._v("props是一个对象")])]),s._v(" "),r("h3",{attrs:{id:"props特点"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#props特点"}},[s._v("#")]),s._v(" props特点")]),s._v(" "),r("ol",[r("li",[s._v("可以传递任意类型的数据,包括函数,甚至是jsx")]),s._v(" "),r("li",[s._v("props是只读的对象,只能读取属性的值,不能修改")]),s._v(" "),r("li",[s._v("使用类组件,如果写了constructor,应该将props传递给super,否则无法在构造函数中获取props")])]),s._v(" "),r("h3",{attrs:{id:"组件通讯的三种方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#组件通讯的三种方式"}},[s._v("#")]),s._v(" 组件通讯的三种方式")]),s._v(" "),r("h4",{attrs:{id:"父组件-子组件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#父组件-子组件"}},[s._v("#")]),s._v(" 父组件 => 子组件")]),s._v(" "),r("ol",[r("li",[s._v("父组件提供要传递的数据")]),s._v(" "),r("li",[s._v("给子组件标签添加属性,值为要传递的数据")]),s._v(" "),r("li",[s._v("子组件通过props接收父组件传递的数据")])]),s._v(" "),r("h4",{attrs:{id:"子组件-父组件"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#子组件-父组件"}},[s._v("#")]),s._v(" 子组件 => 父组件")]),s._v(" "),r("p",[s._v("思路: 利用回调函数,父组件提供回调,子组件调用,将要传递的数据作为回调函数的参数")]),s._v(" "),r("ol",[r("li",[s._v("父组件提供一个回调函数(用于接收数据)")]),s._v(" "),r("li",[s._v("将该函数作为属性的值,传递给子组件")]),s._v(" "),r("li",[s._v("子组件通过props调用回调函数")]),s._v(" "),r("li",[s._v("将子组件的数据作为参数传递给回调函数")])]),s._v(" "),r("div",{staticClass:"custom-block warning"},[r("p",{staticClass:"custom-block-title"},[s._v("注意")]),s._v(" "),r("p",[s._v("需要注意回调函数中this指向的问题,如果使用箭头函数就不会有问题,建议使用箭头函数")])]),s._v(" "),r("h4",{attrs:{id:"兄弟组件通讯"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#兄弟组件通讯"}},[s._v("#")]),s._v(" 兄弟组件通讯")]),s._v(" "),r("ul",[r("li",[s._v("将共享状态提升到最近的公共父组件中,由公共父组件管理这个状态")]),s._v(" "),r("li",[s._v("思想: 状态提升")]),s._v(" "),r("li",[s._v("公共父组件职责: 1. 提供状态 2. 提供操作状态的方法")]),s._v(" "),r("li",[s._v("要通宵的子组件只需要通过props接收状态或操作状态的方法")])]),s._v(" "),r("h3",{attrs:{id:"context"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#context"}},[s._v("#")]),s._v(" Context")]),s._v(" "),r("p",[s._v("跨组件传递数据(类似于vue inject provide)")]),s._v(" "),r("h4",{attrs:{id:"使用步骤"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用步骤"}},[s._v("#")]),s._v(" 使用步骤")]),s._v(" "),r("ol",[r("li",[s._v("调用React.createContext() 创建Provider(提供数据)和Consumer(消费数据)两个组件 "),r("code",[s._v("const {Provider,Consumer} = React.createContext()")])]),s._v(" "),r("li",[s._v("使用"),r("code",[s._v("Provider")]),s._v("组件作为父节点")]),s._v(" "),r("li",[s._v("在Provider标签中设置value属性,值为要提供的数据")]),s._v(" "),r("li",[s._v("调用Consumer组件接收数据,在Consumer组件中使用回调函数的参数获取数据")])]),s._v(" "),r("p",[s._v("实例")]),s._v(" "),r("div",{staticClass:"language-js line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br")])]),r("h3",{attrs:{id:"props深入"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#props深入"}},[s._v("#")]),s._v(" props深入")]),s._v(" "),r("h4",{attrs:{id:"children-属性"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#children-属性"}},[s._v("#")]),s._v(" children 属性")]),s._v(" "),r("ul",[r("li",[s._v("children属性类似于vue的插槽slot,在组件标签中写入的内容会自动传入props.children属性中")]),s._v(" "),r("li",[s._v("children属性与普通props一样,值是可以任意值(文本,jxs,组件,函数)")])]),s._v(" "),r("h4",{attrs:{id:"props校验"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#props校验"}},[s._v("#")]),s._v(" props校验")]),s._v(" "),r("ul",[r("li",[s._v("可以对props传入的数据进行校验")]),s._v(" "),r("li",[s._v("在创建组件的时候可以指定prop的类型,格式等")])]),s._v(" "),r("h4",{attrs:{id:"使用步骤-2"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用步骤-2"}},[s._v("#")]),s._v(" 使用步骤")]),s._v(" "),r("ol",[r("li",[s._v("安装包 prop-types (npm i prop-types | yarn add prop-types)")]),s._v(" "),r("li",[s._v("导入prop-types包 `import PropTypes from 'prop-types'")]),s._v(" "),r("li",[s._v("使用组件名.propTypes ={属性名: PropTypes.类型}")])]),s._v(" "),r("h4",{attrs:{id:"props规则约束"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#props规则约束"}},[s._v("#")]),s._v(" props规则约束")]),s._v(" "),r("ol",[r("li",[s._v("常见类型:array,bool,string,number,object,func")]),s._v(" "),r("li",[s._v("必选PropTypes.string.isRequired")]),s._v(" "),r("li",[s._v("特定结构对象: shape({})")])]),s._v(" "),r("div",{staticClass:"language-js line-numbers-mode"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[s._v("PropTypes"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[s._v("shape")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n    color"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("PropTypes"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("string"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n    fontSize"),r("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v("Proptypes"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("number\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),r("div",{staticClass:"line-numbers-wrapper"},[r("span",{staticClass:"line-number"},[s._v("1")]),r("br"),r("span",{staticClass:"line-number"},[s._v("2")]),r("br"),r("span",{staticClass:"line-number"},[s._v("3")]),r("br"),r("span",{staticClass:"line-number"},[s._v("4")]),r("br")])]),r("ol",{attrs:{start:"4"}},[r("li",[s._v("还有很多请参考文档")])]),s._v(" "),r("h4",{attrs:{id:"props默认值"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#props默认值"}},[s._v("#")]),s._v(" props默认值")]),s._v(" "),r("p",[r("code",[s._v("defaultProps")]),s._v(" 参数是一个对象,可以对props属性传入默认值")])])}),[],!1,null,null,null);t.default=e.exports}}]);