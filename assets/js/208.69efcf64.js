(window.webpackJsonp=window.webpackJsonp||[]).push([[208],{778:function(e,t,s){"use strict";s.r(t);var a=s(58),r=Object(a.a)({},(function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[s("h1",{attrs:{id:"解决element-resetfields-重置表单不生效的问题"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#解决element-resetfields-重置表单不生效的问题"}},[e._v("#")]),e._v(" 解决Element resetFields()重置表单不生效的问题")]),e._v(" "),s("h2",{attrs:{id:"前言"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前言"}},[e._v("#")]),e._v(" 前言")]),e._v(" "),s("p",[e._v("由于最后在做公司后台在使用 element-ui 框架，开发过程中出现 resetFields表单无法重置的问题，在此记录下解决的办法，也能帮助到以后的同学少踩点坑")]),e._v(" "),s("h3",{attrs:{id:"_1-问题重现"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-问题重现"}},[e._v("#")]),e._v(" 1.问题重现")]),e._v(" "),s("p",[e._v("因 “添加” 和 “编辑” 字段是一样的，所以我把它们放在了一个弹框表单里面，也节省了代码资源开销，如果你是分开写的弹框也就不会出现这个问题了。")]),e._v(" "),s("blockquote",[s("p",[e._v("重现步骤：进入列表页后，先打开编辑框，然后打开新增框，新增框会填充第一次打开的编辑框内容")])]),e._v(" "),s("h3",{attrs:{id:"_2-resetfields-不生效的原因"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-resetfields-不生效的原因"}},[e._v("#")]),e._v(" 2.resetFields()不生效的原因")]),e._v(" "),s("p",[e._v("1.此方法用于将form表单的数据设置为初始值")]),e._v(" "),s("p",[e._v("2.而这个初始值是在form mounted生命周期被赋值上去的")]),e._v(" "),s("p",[e._v("3.所以，在 form mounted之前，如果给form表单赋值了，那么后面调用resetFields()都是无效的，因为form表单的初始值已经在 mounted 之前就被赋值了")]),e._v(" "),s("h3",{attrs:{id:"_3-解决办法"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-解决办法"}},[e._v("#")]),e._v(" 3.解决办法")]),e._v(" "),s("p",[e._v("只要在 form 表单 mounted之后再进行赋值操作这样就可以完美解决问题了，即在点击编辑赋值的时候使用 “this.$nextTick” 方法。上代码！")]),e._v(" "),s("div",{staticClass:"language-javascript line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-javascript"}},[s("code",[e._v("使用"),s("span",{pre:!0,attrs:{class:"token keyword"}},[e._v("this")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(".")]),s("span",{pre:!0,attrs:{class:"token function"}},[e._v("$nextTick")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[e._v(")")]),e._v(" 把编辑时需要回显的赋值操作放到这里面即可\n")])]),e._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[e._v("1")]),s("br")])]),s("h3",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[e._v("#")]),e._v(" 总结")]),e._v(" "),s("ol",[s("li",[e._v("使用 "),s("code",[e._v("this.$refs")]),e._v(" 而不是 "),s("code",[e._v("this.$ref")])]),e._v(" "),s("li",[e._v("配合使用 "),s("code",[e._v("this.$nextTick(() => {})")])]),e._v(" "),s("li",[s("code",[e._v("el-form")]),e._v(" 中的 "),s("code",[e._v("model")]),e._v(" / "),s("code",[e._v("ref")]),e._v(" 以及 "),s("code",[e._v("el-form-item")]),e._v(" 中的 "),s("code",[e._v("prop")]),e._v(" 再检查一遍吧")])])])}),[],!1,null,null,null);t.default=r.exports}}]);